<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Lorem ipsum</title>
    <!-- Search Engine -->
    <meta name="description" content="Quisque volutpat ante aliquet, vulputate magna pellentesque, facilisis lorem.">
    <meta name="image" content="http://profesorfaco.github.io/clase-09/image-meta.jpg">
    <!-- Schema.org for Google -->
    <meta itemprop="name" content="Lorem ipsum">
    <meta itemprop="description" content="Quisque volutpat ante aliquet, vulputate magna pellentesque, facilisis lorem.">
    <meta itemprop="image" content="http://profesorfaco.github.io/clase-09/image-meta.jpg">
    <!-- Twitter -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Lorem ipsum">
    <meta name="twitter:description" content="Quisque volutpat ante aliquet, vulputate magna pellentesque, facilisis lorem.">
    <!-- Open Graph general (Facebook, Pinterest & Google+) -->
    <meta name="og:title" content="Lorem ipsum">
    <meta name="og:description" content="Quisque volutpat ante aliquet, vulputate magna pellentesque, facilisis lorem.">
    <meta name="og:type" content="website">
    <!-- Fin de los metadatos -->
    <link rel="stylesheet" href="estilo.css">
    <style>
        figure {
            padding: 0.5rem 1rem;
        }     

        figure figcaption {
            margin: 0rem -0.5em -0.5em -0.5em;
            padding-top:0.5rem;
        }
    </style>
    <title>CAMBIA EL TÍTULO</title>
</head>

<body>
    <nav>
        <select onchange="if (this.value) window.location.href=this.value">
            <option value="index.html">Página de portada</option>
            <option value="page-1.html">Primera página</option>
            <option value="page-2.html" selected>Segunda página</option>
        </select>
    </nav>
    <div class="container">
        <header>
            <h3><a href="https://github.com/profesorfaco/dno037-2020">DNO037</a></h3>
            <h1><a href="index.html">Lorem ipsum dolor sit amet</a></h1>
        </header>
        <section>
            <h2>Lorem ipsum dolor sit amet</h2>
            <p>Cras vitae justo commodo, consequat risus eget, egestas lorem. Quisque consequat sagittis odio eget gravida. Integer dignissim diam sit amet finibus ullamcorper. Nulla semper consequat eros vel accumsan.</p>
            <p><a href="page-1.html">Vínculo a page-1.html</a>. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin rutrum malesuada velit pharetra porttitor. Nulla accumsan turpis mollis urna posuere, nec varius justo rhoncus. Vestibulum condimentum sollicitudin tempor. Ut sapien lacus, euismod ut condimentum eget, hendrerit non ligula. Cras vitae justo commodo, consequat risus eget, egestas lorem. Quisque consequat sagittis odio eget gravida. Integer dignissim diam sit amet finibus ullamcorper. Nulla semper consequat eros vel accumsan.</p>
            <figure>
                <canvas id="uci"></canvas>
                <figcaption>Indica fuente(s) de los datos</figcaption>
            </figure>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin rutrum malesuada velit pharetra porttitor. Nulla accumsan turpis mollis urna posuere, nec varius justo rhoncus. Vestibulum condimentum sollicitudin tempor. Ut sapien lacus, euismod ut condimentum eget, hendrerit non ligula. Cras vitae justo commodo, consequat risus eget, egestas lorem. Quisque consequat sagittis odio eget gravida. Integer dignissim diam sit amet finibus ullamcorper. Nulla semper consequat eros vel accumsan.</p>
        </section>
        <footer>
            <hr>
            <p>Nombre Apellido <time datetime="2020-05-06" class="derecha">Miércoles, 6 de mayo de 2020</time></p>
        </footer>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <script>
        Papa.parse("https://raw.githubusercontent.com/jorgeperezrojas/covid19-data/master/csv/pacientes_en_uci.csv", {
            download: true,
            complete: function(results) {
                console.log(results);

                var metropolitana = results.data[7]
                metropolitana.splice(0, 2) // splice(donde empezar la operación, cuántos elementos eliminar) 

                var valparaiso = results.data[6]
                valparaiso.splice(0, 2) // splice(donde empezar la operación, cuántos elementos eliminar) 

                var biobio = results.data[11]
                biobio.splice(0, 2) // splice(donde empezar la operación, cuántos elementos eliminar)  

                var long_labels = results.data[0]
                long_labels.splice(0, 2) // splice(donde empezar la operación, cuántos elementos eliminar)        
                var short_labels = []; // declaro un arreglo 
                long_labels.forEach(e => short_labels.push(e.substring(0, 5))); // acá agrego elementos al arreglo

                Chart.defaults.global.defaultFontFamily = "'Lucida Console', 'Monaco', 'monospace'";

                new Chart(document.getElementById('uci').getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: short_labels,
                        datasets: [{
                            label: 'METROPOLITANA',
                            borderColor: '#d50000',
                            backgroundColor: 'rgba(200, 200, 200, 0.1)',
                            pointHoverBackgroundColor: '#d50000',
                            borderWidth: 1,
                            pointRadius: 2,
                            lineTension: 0,
                            data: metropolitana
                        }, {
                            label: 'VALPARAÍSO',
                            borderColor: '#aa00ff',
                            backgroundColor: 'rgba(200, 200, 200, 0.1)',
                            pointHoverBackgroundColor: '#aa00ff',
                            borderWidth: 1,
                            pointRadius: 2,
                            lineTension: 0,
                            data: valparaiso
                        }, {
                            label: 'BIOBÍO',
                            borderColor: '#0091ea',
                            backgroundColor: 'rgba(200, 200, 200, 0.1)',
                            pointHoverBackgroundColor: '#0091ea',
                            borderWidth: 1,
                            pointRadius: 2,
                            lineTension: 0,
                            data: biobio
                        }]
                    },
                    options: {
                        responsive: true,
                        tooltips: {
                            position: 'nearest',
                        },
                        scales: {
                            xAxes: [{
                                ticks: {
                                    minRotation: 90
                                }
                            }]
                        }
                    },

                });

            }
        });
    </script>
</body>

</html>